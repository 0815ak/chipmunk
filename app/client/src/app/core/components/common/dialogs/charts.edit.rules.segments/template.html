<div class="chart-content">
    <p class="chart-title">Name of rules group</p>
    <div class="chart-text-line">
        <common-input [value]="name" [type]="'text'" [handles]="{ onKeyUp: this.onNameChange}" [placeholder]="'Type name of this rules group'"></common-input>
    </div>
    <div class="chart-segments">
        <p class="chart-title">Define here RegExps for detection segments with values</p>
        <p class="chart-info">From each line will be done attempt to exclude defined segments. If segment will be found, process will go forward with it.</p>
        <ul *ngIf="segments.length > 0">
            <li *ngFor="let item of segments;">
                <div class="chart-segments-value">
                    <common-input [value]="item.value"
                                  [type]="'text'"
                                  [handles]="{ onKeyUp: onChange.bind(this, 'segments', item.GUID), onBlur: onBlur.bind(this, 'segments', item.GUID) }"
                                  [placeholder]="'RegExp for segment'"></common-input>
                </div>
                <span class="fa fa-close remove" (click)="onRemove('segments', item.GUID)"></span>
            </li>
        </ul>
        <p *ngIf="segments.length === 0" class="chart-note">Press "Add New Segment RegExp" to add the first segment condition</p>
        <div class="chart-segments-buttons">
            <button-flat-text [caption]="'Add New Segment RegExp'" [handle]="onAddNew.bind(this, 'segments')"></button-flat-text>
        </div>
    </div>
    <div class="chart-segments">
        <p class="chart-title">Define here RegExps for detection values from segments</p>
        <p class="chart-info">From each found segments will be done attemt to exclude value. If value will be found, process will go forward with it.</p>
        <ul *ngIf="values.length > 0">
            <li *ngFor="let item of values;">
                <div class="chart-segments-value">
                    <common-input [value]="item.value"
                                  [type]="'text'"
                                  [handles]="{ onKeyUp: onChange.bind(this, 'values', item.GUID), onBlur: onBlur.bind(this, 'values', item.GUID) }"
                                  [placeholder]="'RegExp for value excluding'"></common-input>
                </div>
                <span class="fa fa-close remove" (click)="onRemove('values', item.GUID)"></span>
            </li>
        </ul>
        <p *ngIf="values.length === 0" class="chart-note">Press "Add New Values RegExp" to add the first values condition</p>
        <div class="chart-segments-buttons">
            <button-flat-text [caption]="'Add New Values RegExp'" [handle]="onAddNew.bind(this, 'values')"></button-flat-text>
        </div>
    </div>
    <div class="chart-segments">
        <p class="chart-title">Define here RegExps for clearing values</p>
        <p class="chart-info">From each detected value will be removed all symbols, which will be found by defined bellow RegExp.</p>
        <ul *ngIf="clearing.length > 0">
            <li *ngFor="let item of clearing;">
                <div class="chart-segments-value">
                    <common-input [value]="item.value"
                                  [type]="'text'"
                                  [handles]="{ onKeyUp: onChange.bind(this, 'clearing', item.GUID), onBlur: onBlur.bind(this, 'clearing', item.GUID) }"
                                  [placeholder]="'RegExp for clearing procedure'"></common-input>
                </div>
                <span class="fa fa-close remove" (click)="onRemove('clearing', item.GUID)"></span>
            </li>
        </ul>
        <p *ngIf="clearing.length === 0" class="chart-note">Press "Add New Clearing RegExp" to add the first clearing condition</p>
        <div class="chart-segments-buttons">
            <button-flat-text [caption]="'Add New Clearing RegExp'" [handle]="onAddNew.bind(this, 'clearing')"></button-flat-text>
        </div>
    </div>
    <div class="chart-indexes">
        <p class="chart-title">Define here hooks for indexes</p>
        <p class="chart-info">Hook - RegExp, which will be bound with index on chart. Index - integer value on chart by Y axis. X axis is always time-line and will be detected automatically.</p>
        <ul *ngIf="indexes.length > 0">
            <li *ngFor="let index of indexes;">
                <div class="chart-index-wrapper">
                    <div class="chart-index-value">
                        <common-input [value]="index.value"
                                      [type]="'text'"
                                      [handles]="{ onKeyUp: onIndexHookChange.bind(this, index.GUID) }"
                                      [placeholder]="'RegExp for hook'"></common-input>
                    </div>
                    <div class="chart-index-index">
                        <common-input [value]="index.index"
                                      [type]="'number'"
                                      [handles]="{ onKeyUp: onIndexIndexChange.bind(this, index.GUID) }"
                                      [placeholder]="'Index'"></common-input>
                    </div>
                    <div class="chart-index-label">
                        <common-input [value]="index.label"
                                      [type]="'text'"
                                      [handles]="{ onKeyUp: onIndexLabelChange.bind(this, index.GUID) }"
                                      [placeholder]="'Label for chart'"></common-input>
                    </div>
                </div>
                <span class="fa fa-close remove" (click)="onRemoveIndex(index.GUID)"></span>
            </li>
        </ul>
        <p *ngIf="indexes.length === 0" class="chart-note">Press "Add New Index" to add the first index condition</p>
        <div class="chart-segments-buttons">
            <button-flat-text [caption]="'Add New Index'" [handle]="onAddNewIndex"></button-flat-text>
        </div>
    </div>
</div>
<div class="chart-controls">
    <button-flat-text [caption]="'Apply'" [handle]="onApply"></button-flat-text>
</div>
<div *ngIf="errors.length > 0" class="chart-errors-wrapper" (click)="onErrorsReset()">
    <ul class="chart-errors" (click)="onErrorsReset()">
        <li *ngFor="let error of errors;">{{error}}</li>
    </ul>
    <p>(click to close it)</p>
</div>